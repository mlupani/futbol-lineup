(this["webpackJsonpreact-futbol-lineup"]=this["webpackJsonpreact-futbol-lineup"]||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),l=n.n(c),i=(n(15),n(16),n(2)),o=n(3),s=n(4),d=n.n(s),u=n(7),p={"x-rapidapi-key":"e47e6f05b3mshebf3fdf0a5e9d4dp1ed1eajsndb2206ed0b06","x-rapidapi-host":"api-football-v1.p.rapidapi.com"},j=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,r,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Date,a=n.getFullYear(),e.next=5,fetch("https://api-football-v1.p.rapidapi.com/v2/teams/search/".concat(t),{method:"GET",headers:p});case 5:return r=e.sent,e.next=8,r.json();case 8:return c=e.sent,l=c.api.teams[0].team_id,e.next=12,fetch("https://api-football-v1.p.rapidapi.com/v2/players/squad/".concat(l,"/").concat(a-1,"-").concat(a),{method:"GET",headers:p});case 12:return r=e.sent,e.next=15,r.json();case 15:return c=e.sent,e.abrupt("return",c.api.players.map((function(e){return{player_name:e.player_name,player_id:e.player_id,age:e.age,nationality:e.nationality,position:e.position,x:0,y:0}})));case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),h=n(0);function f(e){var t=e.setPlantel,n=e.setLoading,r=e.loading,c=Object(a.useState)(""),l=Object(o.a)(c,2),i=l[0],s=l[1],p=function(){var e=Object(u.a)(d.a.mark((function e(){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),a=i.replace(" ","_").toLowerCase(),e.next=4,j(a);case 4:r=e.sent,t(r),n(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(a.Fragment,{children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-8",children:Object(h.jsx)("input",{type:"text",className:"form-control",value:i,name:"team",id:"team",onChange:function(e){return s(e.target.value)}})}),Object(h.jsx)("div",{className:"col-4",children:Object(h.jsx)("input",{type:"button",disabled:!!(r||i.length<3),value:"Buscar",className:"btn-primary form-control",onClick:p})})]}),Object(h.jsx)("br",{})]})}function b(e){var t=e.handleDrop,n=e.handleDragOver,r=e.handleDragEnter,c=e.handleDragLeave,l=e.plantel,i=e.handleDragEnd,o=e.handleDrag;return Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{id:"plantel",onDrop:t,onDragOver:n,onDragEnter:r,onDragLeave:c,className:"col-12 plantel",children:l.map((function(e,n){var a=e.player_id,r=e.player_name;return Object(h.jsx)("li",{onDrop:t,id:a.toString(),onDragEnd:i,draggable:!0,onDragStart:o,children:r},n)}))})}),Object(h.jsx)("br",{})]})}n(19);function g(e){var t=e.handleDrop,n=e.handleDragOver,a=e.handleDragEnter,r=e.handleDragLeave,c=e.titulares,l=e.handleDragEnd,i=e.handleDrag;return Object(h.jsx)("div",{id:"cancha",onDrop:t,onDragOver:n,onDragEnter:a,onDragLeave:r,children:Object(h.jsx)("ul",{id:"titulares",children:c.map((function(e,t){var n=e.player_id,a=e.player_name,r=e.x,c=e.y;return Object(h.jsx)("li",{style:{position:"absolute",left:"".concat(r,"px"),top:"".concat(c,"px")},id:n.toString(),onDragEnd:l,draggable:!0,onDragStart:i,children:a},t)}))})})}function v(e){var t=e.handleDrop,n=e.handleDragOver,a=e.handleDragEnter,r=e.handleDragLeave,c=e.suplentes,l=e.handleDragEnd,i=e.handleDrag;return Object(h.jsxs)("div",{id:"banco",onDrop:t,onDragOver:n,onDragEnter:a,onDragLeave:r,children:[Object(h.jsx)("h5",{children:Object(h.jsx)("u",{children:"Suplentes"})}),Object(h.jsx)("ul",{children:c.map((function(e,t){var n=e.player_id,a=e.player_name;return Object(h.jsx)("li",{id:n.toString(),onDragEnd:l,draggable:!0,onDragStart:i,children:a},t)}))})]})}function O(){return Object(h.jsx)("div",{className:"col-6",style:{float:"right"},children:Object(h.jsx)("div",{className:"spinner"})})}var m=n(10),x=n.n(m);var D=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),l=Object(o.a)(c,2),s=l[0],d=l[1],u=Object(a.useState)([]),p=Object(o.a)(u,2),j=p[0],m=p[1],D=Object(a.useState)(!1),y=Object(o.a)(D,2),_=y[0],E=y[1],w=Object(a.useState)(""),N=Object(o.a)(w,2),L=N[0],S=N[1],k=Object(a.useState)({x:0,y:0}),C=Object(o.a)(k,2),T=C[0],F=C[1],I=Object(a.useState)(""),P=Object(o.a)(I,2),B=P[0],q=P[1];Object(a.useEffect)((function(){var e=document.querySelector("#cancha");null!==e&&void 0!==e&&x()(e).then((function(e){var t=e.toDataURL();q(t)}))}),[s]);var A=function(e){var t=e.target.id;e.dataTransfer.setData("text/plain",t)},G=function(e){var t=+e.dataTransfer.getData("text").trim(),a=e.currentTarget.id,c=[],l=!1;if(a)if("cancha"===a){var o=s.filter((function(e){return e.player_id===t}));if(o.length)S("");else{if(s.length>10)return S("Los titulares no pueden ser mas de 11 jugadores"),!1;S("")}var u=n.filter((function(e){return e.player_id!==t}));r(u);var p=j.filter((function(e){return e.player_id!==t}));m(p),(o=n.filter((function(e){return e.player_id===t}))).length||(o=j.filter((function(e){return e.player_id===t}))),o.length||(o=s.filter((function(e){return e.player_id===t})),c=s.filter((function(e){return e.player_id!==t})),l=!0),o[0].x=T.x,o[0].y=T.y,d(l?[].concat(Object(i.a)(o),Object(i.a)(c)):function(e){return[].concat(Object(i.a)(e),Object(i.a)(o))})}else if("banco"===a){S("");var h=n.filter((function(e){return e.player_id!==t}));r(h);var f=s.filter((function(e){return e.player_id!==t}));d(f);var b=n.filter((function(e){return e.player_id===t}));b.length||(b=s.filter((function(e){return e.player_id===t}))),m((function(e){return[].concat(Object(i.a)(e),Object(i.a)(b))}))}else if("plantel"===a){S("");var g=s.filter((function(e){return e.player_id!==t}));d(g);var v=j.filter((function(e){return e.player_id!==t}));m(v);var O=s.filter((function(e){return e.player_id===t}));O.length||(O=j.filter((function(e){return e.player_id===t}))),r((function(e){return[].concat(Object(i.a)(e),Object(i.a)(O))}))}},J=function(e){e.preventDefault()},R=function(e){e.preventDefault()},U=function(e){e.preventDefault(),F({x:e.clientX-25,y:e.clientY-15})},Y=function(e){e.preventDefault()};return Object(h.jsxs)("div",{className:"container",style:{marginTop:"20px"},children:[Object(h.jsx)(f,{setPlantel:r,setLoading:E,loading:_}),_?Object(h.jsx)(O,{}):n.length?Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)(b,{handleDrop:G,handleDragOver:U,handleDragEnter:J,handleDragLeave:R,plantel:n,handleDragEnd:Y,handleDrag:A}),Object(h.jsx)("div",{className:"row",style:{fontWeight:"bold",textAlign:"left",marginTop:"5px"},children:Object(h.jsx)("p",{className:"text-danger",children:L})}),Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-12 wrapper",children:[Object(h.jsx)(g,{handleDrop:G,handleDragOver:U,handleDragEnter:J,handleDragLeave:R,titulares:s,handleDragEnd:Y,handleDrag:A}),Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-12",children:[Object(h.jsx)("button",{onClick:function(e){S(""),e.preventDefault(),d([]),r((function(e){return[].concat(Object(i.a)(e),Object(i.a)(s))}))},className:"btn btn-success pull-left",children:"Limpiar cancha"}),Object(h.jsx)("button",{onClick:function(e){S(""),e.preventDefault(),m([]),r((function(e){return[].concat(Object(i.a)(e),Object(i.a)(j))}))},className:"btn btn-danger pull-left",children:"Limpiar banco"})]})}),11===s.length&&Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-12",style:{marginTop:"10px",textAlign:"right"},children:Object(h.jsx)("button",{onClick:function(){var e=new Image;e.crossOrigin="anonymous",e.src=B,e.onload=function(){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0);var a=document.createElement("a");a.download="formacion.png",a.href=t.toDataURL("image/png"),a.click()}},className:"btn btn-warning pull-right",children:"Exportar como imagen"})})}),Object(h.jsx)(v,{handleDrop:G,handleDragOver:U,handleDragEnter:J,handleDragLeave:R,suplentes:j,handleDragEnd:Y,handleDrag:A})]})})]}):""]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),c(e),l(e)}))};l.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(D,{})}),document.getElementById("root")),y()}},[[20,1,2]]]);
//# sourceMappingURL=main.5489fabd.chunk.js.map